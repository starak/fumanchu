/*!
 * Fumanchu, a Mustache extension by St√•le Raknes, 2012
 * http://github.com/starak/fumanchu
 */(function(e,t){"use strict";if(typeof define=="function")define(["mustache"],t);else{if(typeof e.Mustache!="object"){var n=new Error("Fumanchu dependency error!");throw window.fumanchu=function(){throw n},n}e.fumanchu=t(e.Mustache)}})(this,function(e){"use strict";function u(e,t){return document.querySelector(t||"body").appendChild(e),e}function a(e){var t=document.createDocumentFragment(),i=document.createElement("div"),s={};i.innerHTML=e;var o=i.querySelectorAll("["+r+"]"),a=o.length;for(var f=0;f<a;f++){var l=o[f],c=l.getAttribute(n),h=l.getAttribute(r);if(c==="array"){if(!s[h])s[h]=[];else if(typeof s[h].push!="function"){console.error("Error in fumanchu collection! Duplicate declaration: '"+h+"'.");continue}s[h].push(l)}else{if(!!s[h]){console.error("Error in fumanchu collection! Duplicate declaration: '"+h+"'.");continue}s[h]=l}l.removeAttribute(n),l.removeAttribute(r)}while(i.firstChild)t.appendChild(i.firstChild);t.collection=s;for(var p in s)s.hasOwnProperty(p)&&(t[p]=s[p]);return t.appendTo=function(e){return u(t,e)},t}function f(e){return e.replace(/\{\{#([^\/\}]+)\/\}\}/g,"{{#$1}}{{/$1}}")}function l(t,n,r){t=s[t]||f(t),r=r||{},n=n||{};var i,u;for(i in o)o.hasOwnProperty(i)&&(n[i]||(n[i]=o[i]));for(u in s)s.hasOwnProperty(u)&&(r[u]||(r[u]=s[u]));return a(e.render(t,n,r))}var t="0.1.0",n="data-collect-type",r="data-collect-as",i='script[type="text/fumanchu-template"]',s={},o={};return l.register={template:function(e,t){s[e]=f(t)},helper:function(e,t){o[e]=t},helpers:function(e){for(var t in e)e.hasOwnProperty(t)&&this.helper(t,e[t])}},l.init=function(e){e=e||i;var t=document.querySelectorAll(e)||[];for(var n=0;n<t.length;n++){var r=t[n];s[r.id]=f(r.innerHTML)}return s},l.version=t,l});