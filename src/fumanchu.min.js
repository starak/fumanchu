/*!
 * Fumanchu 0.0.6, a Mustache extension by St√•le Raknes, 2012
 * http://github.com/starak/fumanchu
 */(function(e,t){if(typeof define=="function")define(["mustache"],t);else{if(typeof e.Mustache!="object"){var n=new Error("Fumanchu dependency error!");throw window.fumanchu=function(){throw n},n}e.fumanchu=t(e.Mustache)}})(this,function(e){"use strict";function o(e,t){return document.querySelector(t||"body").appendChild(e),e}function u(e){var r=document.createDocumentFragment(),i=document.createElement("div"),s={};i.innerHTML=e;var u=i.querySelectorAll("["+n+"]"),a=u.length;for(var f=0;f<a;f++){var l=u[f],c=l.getAttribute(t),h=l.getAttribute(n);if(c==="array"){if(!s[h])s[h]=[];else if(typeof s[h].push!="function"){console.error("Error in fumanchu collection! Duplicate declaration: '"+h+"'.");continue}s[h].push(l)}else{if(!!s[h]){console.error("Error in fumanchu collection! Duplicate declaration: '"+h+"'.");continue}s[h]=l}l.removeAttribute(t),l.removeAttribute(n)}while(i.firstChild)r.appendChild(i.firstChild);r.collection=s;for(var p in s)s.hasOwnProperty(p)&&(r[p]=s[p]);return r.appendTo=function(e){return o(r,e)},r}function a(e){return e.replace(/\{\{#([^\/\}]+)\/\}\}/g,"{{#$1}}{{/$1}}")}function f(t,n,r){t=i[t]||a(t),r=r||{},n=n||{};var o,f;for(o in s)s.hasOwnProperty(o)&&(n[o]||(n[o]=s[o]));for(f in i)i.hasOwnProperty(f)&&(r[f]||(r[f]=i[f]));return u(e.render(t,n,r))}var t="data-collect-type",n="data-collect-as",r='script[type="text/fumanchu-template"]',i={},s={};return f.register={template:function(e,t){i[e]=a(t)},helper:function(e,t){s[e]=t},helpers:function(e){for(var t in e)e.hasOwnProperty(t)&&this.helper(t,e[t])}},f.init=function(e){e=e||r;var t=document.querySelectorAll(e)||[];for(var n=0;n<t.length;n++){var s=t[n];i[s.id]=a(s.innerHTML)}return i},f.version="0.0.6",f});